{% extends 'masonry.html' %}

{% block title%} Profile {% endblock %}

{% block content %}
<div class="container">
    <div class="container">
        <h2>User Profile</h2>
        <p>Welcome {{ user.username }}</p>
    </div>

    <div class="container mt-5">
        <h4>Account Details</h4>
        <div class="d-flex justify-content-between">
            <div>
                <a href="/users/profile/change_username/" class="btn btn-primary">Change Username</a>
                <a href="/users/profile/change_password/" class="btn btn-primary">Change Password</a>
                <a href="/users/profile/delete/" class="btn btn-danger">Delete Account</a>
            </div>
            <div>
                {% if request.user.is_admin %}
                    <a href="/admin" class="btn btn-warning">Admin</a>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="container mt-5">
        <h4>Security</h4>
        <div class="d-flex">
            <div class="mt-1">
                {% if user.otp %}
                    <form action="{% url 'users:toggle_otp' %}" method="post">
                        {% csrf_token %}
                            <button type="submit" class="btn {% if user.otp %}btn-warning{% else %}btn-success{% endif %}">
                                Disable OTP
                            </button>
                    </form>
                {% else %}
                    <form action="{% url 'users:setup_otp' %}" method="post">
                        {% csrf_token %}
                            <button type="submit" class="btn {% if user.otp %}btn-warning{% else %}btn-success{% endif %}">
                                Enable OTP
                            </button>
                    </form>
                {% endif %}
            </div>
            <div class="p-1">
                <!--
                <a href="/passkeys" class="btn btn-primary">Passkey</a>
                -->
            </div>
        </div>
    </div>
</div>
{% endblock %}